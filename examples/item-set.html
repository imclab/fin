<html>
	<head>
		<title>fin-test</title>
	</head>
	<body>
		<div id="template" style="display: none;">

			<div class="user">
				<b>A User</b>
				<div>Name: (( name )) </div>
				<div>Email: (( email )) </div>
				<div>Profile: (( profile )) </div>
			</div>
			<br />
			<div class="input">
				<b>Edit user</b>
				<br />Name: (( Input name ))
				<br />Email: (( Input email ))
				<br />Profile: (( Input profile ))
			</div>
			<br />
			<br />
			<br />
		</div>
			
		<div id="items"></div>
		<div id="output"></div>

		<script type="text/javascript" src="../lib/js.io/packages/jsio.js"></script>
		<script type="text/javascript">
			jsio.path.browser = '../js'
			jsio.path.common = '../js'
			jsio('import browser.fin as fin')
			
			fin.connect(function(){
				var output = document.getElementById('output')
				var items = document.getElementById('items')
				var template = document.getElementById('template')

				items.appendChild(fin.applyTemplate(template.innerHTML, 'marcus'))
				
				var myImportantBugs = fin.getItemSet({
					type: 'bug',
					owner: 'marcus',
					priority: ['>', 5]
				})
				
				var marcusSet = fin.getItemSet({
					name: 'Marcus',
					email: 'marcus@meebo-inc.com'
				})
				
				marcusSet.subscribe('Mutated', function(mutation) {
					if (mutation.add) {
						output.innerHTML += "<div>Item " + mutation.add + " added</div>"
					}
					if (mutation.remove) {
						output.innerHTML += "<div>Item " + mutation.remove + " removed</div>"
					}
				})
			})
		</script>
	</body>
</html>